# Note: Using 'python -m pip' instead of 'pip' to ensure pixi environment's pip is used.
# Direct 'pip' command may resolve to system pip which is externally-managed (PEP 668).
nodes:
  - id: move_angle
    build: python -m pip install -e AHSimulation
    path: AHSimulation/examples/finger_angle_control.py
    inputs:
      tick: dora/timer/millis/50
    outputs:
      - hand_quat

  - id: hand_simulation_r
    build: python -m pip install -e AHSimulation
    path: AHSimulation/AHSimulation/mj_mink_right.py
    inputs:
      r_hand_quat: move_angle/hand_quat
      tick: dora/timer/millis/2
      tick_ctrl: dora/timer/millis/10
    outputs:
      - mj_r_joints_pos
    args: -m quat

  - id: hand_simulation_l
    build: python -m pip install -e AHSimulation
    path: AHSimulation/AHSimulation/mj_mink_left.py
    inputs:
      l_hand_quat: move_angle/hand_quat
      tick: dora/timer/millis/2
      tick_ctrl: dora/timer/millis/10
    outputs:
      - mj_l_joints_pos
    args: -m quat
